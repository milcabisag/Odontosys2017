<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="detalle_factura_empresa" language="groovy" pageWidth="612" pageHeight="1008" columnWidth="572" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isFloatColumnFooter="true" isIgnorePagination="true" uuid="8872015c-8cf2-4457-84ea-b70d942f40d3">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="ireport.callouts" value="##Tue Jul 08 13:07:46 PYT 2014"/>
	<parameter name="id_facturaemp" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT 	
	orden_empresa.idorden_empresa AS orden,
	empresa.nombre AS nom_empresa,
	empresa.ruc AS ruc_empresa,
	paciente.Nombres AS nom_paciente,
	paciente.Apellidos AS ape_paciente,
	paciente.Nro_CI AS ced_paciente,
	convenio.nom_conv AS nom_convenio,
	talonario.nro_factura AS nro_factura,
	factura.fecha AS fecha_factura,
	factura_empresa.montoTotal AS total_factura,
	datos.nombre_empresa AS empresa,
	datos.nombre_propietario AS propietario,
	datos.actividad AS actividad,
	datos.direccion AS direccion,
	datos.ciudad AS ciudad,
	datos.telefono AS telefono
FROM
	factura_empresa JOIN empresa ON factura_empresa.fk_empresa = empresa.idempresa
	JOIN orden_empresa ON orden_empresa.fk_facturaempresa = factura_empresa.idfactura_empresa
	JOIN factura ON factura.idfactura = orden_empresa.fk_factura
	JOIN paciente ON paciente.idPaciente = factura.fk_paciente
	JOIN conv_paciente ON conv_paciente.idconv_paciente = orden_empresa.fk_convpaciente
	JOIN convenio ON convenio.idconvenio = conv_paciente.fk_convenio
	JOIN talonario ON talonario.idtalonario = factura.fk_talonario
	JOIN datos
WHERE
	factura_empresa.idfactura_empresa = $P{id_facturaemp} AND datos.iddatos = 1]]>
	</queryString>
	<field name="orden" class="java.lang.Integer"/>
	<field name="nom_empresa" class="java.lang.String"/>
	<field name="ruc_empresa" class="java.lang.String"/>
	<field name="nom_paciente" class="java.lang.String"/>
	<field name="ape_paciente" class="java.lang.String"/>
	<field name="ced_paciente" class="java.lang.Integer"/>
	<field name="nom_convenio" class="java.lang.String"/>
	<field name="nro_factura" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fecha_factura" class="java.sql.Date"/>
	<field name="total_factura" class="java.lang.Integer"/>
	<field name="empresa" class="java.lang.String"/>
	<field name="propietario" class="java.lang.String"/>
	<field name="actividad" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="direccion" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ciudad" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="telefono" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<title>
		<band height="79" splitType="Stretch">
			<rectangle radius="10">
				<reportElement x="0" y="0" width="561" height="45" uuid="ef9bff59-c5ce-408e-baeb-16d2e523b431"/>
			</rectangle>
			<staticText>
				<reportElement mode="Opaque" x="0" y="46" width="561" height="30" forecolor="#006699" backcolor="#EEEDFF" uuid="993a1dd0-a8c5-4658-a73e-418ad0cba4c9"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="20" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="1_1_2"/>
				</textElement>
				<text><![CDATA[Detalle de Factura]]></text>
			</staticText>
			<textField>
				<reportElement x="260" y="31" width="300" height="14" uuid="d65b4fc0-033d-4afe-85dd-2f325a8cb237"/>
				<textElement textAlignment="Left" markup="none">
					<font size="8" isBold="false" isItalic="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Dirección: "+$F{direccion}+" - "+$F{ciudad}+"  -  Teléfono: "+$F{telefono}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="10" width="250" height="29" uuid="b8b05fa8-108e-4572-99eb-33b471878935"/>
				<textElement textAlignment="Center" markup="none">
					<font size="20" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{empresa}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="260" y="17" width="300" height="13" uuid="2c7a281d-7c85-4647-af3a-bd2e06f64932"/>
				<textElement textAlignment="Left" markup="none">
					<font size="10" isBold="false" isItalic="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{actividad}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="260" y="3" width="300" height="13" uuid="8c31702f-574f-45c7-be29-47759995d1cd"/>
				<textElement textAlignment="Left" markup="none">
					<font size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA["De "+$F{propietario}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="27" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="0" y="0" width="76" height="25" forecolor="#006699" backcolor="#EEEDFF" uuid="a904ce2d-c609-43bf-a8d0-12567f3ffd4a"/>
				<box>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="13" isBold="true"/>
				</textElement>
				<text><![CDATA[Empresa]]></text>
			</staticText>
			<textField>
				<reportElement x="76" y="0" width="287" height="25" uuid="b1e05f29-85f2-44b1-90d5-7db26c7aeeec"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<paragraph leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nom_empresa}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="363" y="0" width="197" height="25" uuid="0e30efad-b453-47a7-a180-0b5a1ee845fc"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="10"/>
					<paragraph leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA["RUC Nro: "+$F{ruc_empresa}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="142">
			<staticText>
				<reportElement mode="Opaque" x="0" y="8" width="76" height="20" forecolor="#000000" backcolor="#F2F2F2" uuid="81e8a283-040e-457c-9406-2733a917e8ad"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Paciente]]></text>
			</staticText>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="76" y="8" width="287" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="3b3f0579-e717-4aad-96c2-8d7f0c1d4ae2"/>
				<box>
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single" leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nom_paciente}+" "+$F{ape_paciente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="362" y="8" width="76" height="20" forecolor="#000000" backcolor="#F2F2F2" uuid="04e8ba40-9bbf-487e-9b5f-7f4191c954a2"/>
				<box>
					<pen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="10" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[C.I. Nro]]></text>
			</staticText>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="438" y="8" width="121" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="27e83bcc-046f-40b9-ad05-5f6a0d517b63"/>
				<box>
					<pen lineWidth="0.5" lineStyle="Double"/>
					<topPen lineWidth="0.5" lineStyle="Double" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Double"/>
					<bottomPen lineWidth="0.5" lineStyle="Double"/>
					<rightPen lineWidth="0.5" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single" leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ced_paciente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="0" y="27" width="76" height="20" forecolor="#000000" backcolor="#F2F2F2" uuid="9ca01b3f-7364-41d4-9d12-3747dfa6813f"/>
				<box>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="10" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Convenio]]></text>
			</staticText>
			<textField>
				<reportElement x="76" y="27" width="484" height="20" forecolor="#000000" uuid="41ae34a9-624f-48c4-8a82-fa8b616c96ad"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10"/>
					<paragraph leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nom_convenio}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="47" width="380" height="20" forecolor="#000000" uuid="be049887-0d3f-4cbe-9ec3-cb9879bad26b"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10"/>
					<paragraph leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA["Factura Nro 001-001-00"+$F{nro_factura}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="381" y="47" width="180" height="20" forecolor="#000000" uuid="c6267579-f08a-4bb3-b4e9-a151dd5bcec2"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10"/>
					<paragraph leftIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha "+$F{fecha_factura}]]></textFieldExpression>
			</textField>
			<line direction="BottomUp">
				<reportElement positionType="Float" x="-1" y="136" width="560" height="1" forecolor="#006699" uuid="7537b6bb-64ba-4da9-95e1-c63249aee915"/>
				<graphicElement>
					<pen lineWidth="2.5" lineStyle="Double"/>
				</graphicElement>
			</line>
			<subreport>
				<reportElement x="0" y="67" width="561" height="64" uuid="66cfc3a3-21c1-449e-8b62-ebae4f4c8b09"/>
				<subreportParameter name="id_ordenempresa">
					<subreportParameterExpression><![CDATA[$F{orden}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA["C:\\Users\\user\\Google Drive\\UNA\\Odontosys2017\\OdontoSys\\src\\Reportes\\subreport1.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<columnFooter>
		<band height="30">
			<staticText>
				<reportElement mode="Opaque" x="0" y="3" width="380" height="25" forecolor="#006699" backcolor="#EEEDFF" uuid="a754c692-01e1-4659-9522-4eb3382a3e33"/>
				<box>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Factura]]></text>
			</staticText>
			<textField pattern="#,##0">
				<reportElement x="421" y="3" width="139" height="25" uuid="5257e8fd-5f23-4b9a-9f8f-ae91f9459651"/>
				<box>
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_factura}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Transparent" x="381" y="3" width="40" height="25" forecolor="#000000" backcolor="#FFFFFF" uuid="2de6652e-b252-4e99-90e4-b9a23f1410f8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Gs.]]></text>
			</staticText>
		</band>
	</columnFooter>
</jasperReport>
